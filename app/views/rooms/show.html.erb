<div class="RoomDetailContainer">
  <% if @room %>
    <div class="RoomDetail">
      <% if @room.image.present? %>
        <%= image_tag @room.image.url, class: "room-detail-image", alt: @room.name %>
      <% else %>
        <%= image_tag "fallback/room.jpg", class: "room-detail-image", alt: 'デフォルト画像' %>
      <% end %>

      <div class="RoomDetailInfo">
        <h1 class="RoomDetailName"><%= @room.name %></h1>
        <p class="RoomDetailAddress"><%= @room.address %></p>
        <p class="RoomDetailDescription"><%= @room.description %></p>
        <p class="RoomDetailPrice">¥<%= @room.price %>〜</p>

        <h2>予約する</h2>
        <%= form_with(model: [@room, Reservation.new], local: true) do |form| %>
          <div class="form-group">
            <%= form.label :check_in, "チェックイン" %>
            <%= form.date_select :check_in, start_year: Date.today.year, class: "form-control" %>
          </div>
          <div class="form-group">
            <%= form.label :check_out, "チェックアウト" %>
            <%= form.date_select :check_out, start_year: Date.today.year, class: "form-control" %>
          </div>
          <div class="form-group">
            <%= form.label :people, "人数" %>
            <%= form.number_field :people, class: "form-control small-input" %>
          </div>
          <%= form.hidden_field :room_id, value: @room.id %>
          <%= form.submit "予約を確認", class: "RoomDetailButton" %>
        <% end %>
      </div>
    </div>

    <div class="RoomReviews">
      <h2>レビュー</h2>
      <% if @room.reviews.present? %>
        <ul>
          <% @room.reviews.each do |review| %>
            <li>
              <p><strong><%= review.user.name %></strong>: <%= review.content %></p>
              <p>評価: <%= review.rating %> / 5</p>
            </li>
          <% end %>
        </ul>
      <% else %>
        <p>レビューはまだありません。</p>
      <% end %>
    </div>
  <% else %>
    <p>指定された部屋が見つかりません。</p>
  <% end %>
</div>
